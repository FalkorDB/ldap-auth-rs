apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: ldap-auth-staging

namePrefix: staging-
nameSuffix: ""

commonLabels:
  environment: staging

resources:
- ../../base
# Ingress disabled by default (internal service)
# Uncomment if external access is required:
# - ingress.yaml

patches:
- path: deployment-patch.yaml

configMapGenerator:
- name: ldap-auth-config
  behavior: merge
  literals:
  - LOG_LEVEL=info
  - RUST_LOG=ldap_auth_rs=info

images:
- name: ldap-auth-rs
  newTag: staging

replicas:
- name: ldap-auth-rs
  count: 2
