# StringSecret - Auto-generates secure random secrets
# Requires: kubectl apply -f https://github.com/mittwald/kubernetes-secret-generator/releases/latest/download/secret-generator.yaml
apiVersion: secretgenerator.mittwald.de/v1alpha1
kind: StringSecret
metadata:
  name: ldap-auth-secrets
  labels:
    app.kubernetes.io/component: secrets
spec:
  # Auto-generate secure random passwords
  fields:
  - fieldName: ADMIN_PASSWORD
    length: "32"
    encoding: base64
  - fieldName: JWT_SECRET
    length: "64"
    encoding: base64
  - fieldName: REDIS_PASSWORD
    length: "32"
    encoding: base64
  # Static fields (can be overridden in overlays)
  data:
    ADMIN_USERNAME: YWRtaW4=  # admin (base64 encoded)
---
# If secret-generator is not available, fallback to manual secret
# Uncomment this and comment out StringSecret above
# apiVersion: v1
# kind: Secret
# metadata:
#   name: ldap-auth-secrets
#   labels:
#     app.kubernetes.io/component: secrets
# type: Opaque
# stringData:
#   ADMIN_USERNAME: "admin"
#   ADMIN_PASSWORD: "changeme"
#   JWT_SECRET: "changeme-generate-secure-secret"
#   REDIS_PASSWORD: "changeme-redis-password"
